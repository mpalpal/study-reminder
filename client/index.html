<!doctype html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Study Log</title>
  <link rel="stylesheet" href="/styles.css" />
  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#ffffff" />
</head>
<body>
  <header class="topbar">
    <h1 class="app-title">Study Log</h1>
    <nav class="tabs">
      <a href="#review" id="tabReview" class="tab">復習</a>
      <a href="#record" id="tabRecord" class="tab">記録</a>
    </nav>
  </header>

  <main class="container">

    <!-- ===== 復習ページ ===== -->
    <section id="pageReview" class="page">
      <div class="card">
        <h2>復習</h2>
        <p class="muted">固定：昨日 / 1週間前 / 2週間前　＋　選択：0〜14日前</p>
      </div>

      <!-- 固定：昨日 -->
      <div class="card">
        <h3 id="fixed1Heading">—</h3>
        <ul id="fixed1List" class="list"></ul>
        <div id="fixed1Empty" class="muted box" style="display:none;">その日は記録がありません</div>
      </div>

      <!-- 固定：7日前 -->
      <div class="card">
        <h3 id="fixed7Heading">—</h3>
        <ul id="fixed7List" class="list"></ul>
        <div id="fixed7Empty" class="muted box" style="display:none;">その日は記録がありません</div>
      </div>

      <!-- 固定：14日前 -->
      <div class="card">
        <h3 id="fixed14Heading">—</h3>
        <ul id="fixed14List" class="list"></ul>
        <div id="fixed14Empty" class="muted box" style="display:none;">その日は記録がありません</div>
      </div>

      <!-- 選択：0〜14日前 -->
      <div class="card">
        <div class="row" style="align-items:flex-end;">
          <div style="flex:1;">
            <div class="label">選択表示（0〜14日前）</div>
            <select id="offsetSelect" class="select"></select>
          </div>
          <button id="setToTodayBtn" type="button" class="secondary">今日</button>
        </div>

        <h3 id="reviewHeading">—</h3>
        <ul id="reviewList" class="list"></ul>
        <div id="reviewEmpty" class="muted box" style="display:none;">その日は記録がありません</div>
      </div>

      <!-- 内容（共通） -->
      <div class="card">
        <h3>内容</h3>
        <div id="reviewDetail" class="box muted">タイトルをタップすると内容が表示されます</div>
      </div>
    </section>

    <!-- ===== 記録ページ ===== -->
    <section id="pageRecord" class="page" style="display:none;">
      <div class="card">
        <h2>今日の記録</h2>
        <p class="muted" id="todayLabel">—</p>

        <div class="field">
          <label class="label" for="title">タイトル</label>
          <input id="title" class="input" placeholder="例：英単語 / 数学 / 物理 など" />
        </div>

        <div class="field">
          <label class="label" for="body">内容</label>
          <textarea id="body" class="textarea" placeholder="学んだ内容を書く"></textarea>
        </div>

        <div class="row">
          <button id="saveBtn" type="button">保存</button>
          <button id="cancelEditBtn" type="button" class="secondary" style="display:none;">編集をやめる</button>
          <span id="msg" class="msg"></span>
        </div>
      </div>

      <div class="card">
        <h3>今日の一覧</h3>
        <ul id="todayList" class="list"></ul>
        <div id="todayEmpty" class="muted box" style="display:none;">まだ記録がありません</div>
      </div>
      <div class="card">
        <h3>バックアップ</h3>
        <p class="muted">iPhone→iCloud Driveに保存して、iPadでインポートすると同期できます。</p>

        <div class="row" style="justify-content:flex-start; gap:10px; flex-wrap:wrap;">
          <button id="exportBtn" type="button">エクスポート（JSON）</button>

          <label class="secondary" style="padding:10px 12px; border-radius:10px; border:1px solid #ddd; cursor:pointer;">
            インポート（JSON）
            <input id="importFile" type="file" accept="application/json" style="display:none;" />
          </label>

          <button id="wipeBtn" type="button" class="danger">全削除</button>
        </div>

        <p id="backupMsg" class="msg"></p>
      </div>
    </section>

  </main>

  <script src="/main.js"></script>
</body>
</html>